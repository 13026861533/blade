<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blade,简洁强大的javaweb框架">
    <meta name="author" content="biezhi">
	<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
    <title>Blade - 简洁强大的javaweb框架</title>
    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/roboto.min.css" rel="stylesheet">
    <link href="../css/material.min.css" rel="stylesheet">
    <link href="../css/ripples.min.css" rel="stylesheet">
	<!-- Custom styles for this template -->
    <link href="../css/style.css" rel="stylesheet">
    <link href="../plugin/highlight/styles/github.css" rel="stylesheet">
	
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
	<!-- Fixed navbar -->
    <nav class="navbar navbar-info navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Blade</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">入门</a></li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">文档 <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="./tutorials/index.html">教程</a></li>
                <li><a href="../dart-by-example.html">Blade示例</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="./index.html">开发者指南</a></li>
                <li><a href="../apidocs/index.html">API参考</a></li>
                <li><a href="#">语言规范</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">工具 <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">下载&nbsp;Blade</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Eclipse</a></li>
                <li><a href="#">工具FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">资源 <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">示例代码</a></li>
                <li><a href="#">性能</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Blade 短视频</a></li>
              </ul>
            </li>
            <li><a href="#contact">支持</a></li>
            
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../navbar/">微博</a></li>
            <li><a href="../navbar-static-top/">官方Q群</a></li>
            <li class="active"><a href="./">置顶<span class="sr-only">(current)</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
	
	<div class="container-page">
		  <div class="container">
		    <div class="container col-md-10 col-md-offset-1 sub-page">
		      <div class="has-permalinks">
		      <div class="col-md-4">
				  <div class="bs-docs-sidebar hidden-print affix-top" role="complementary">
					<ol class="toc nav bs-sidenav" id="markdown-toc">
					  <li><a href="#section-1">开始</a></li>
					  <li><a href="#section-install">安装Blade</a>
					  	<ol class="nav subnav">
					      <li><a href="#section-withmaven">使用maven</a></li>
					      <li><a href="#section-nomaven">不使用maven</a>    
					    </ol>
					  </li>
					  <li><a href="#section-quickstart">快速入门</a>
					  	<ol class="nav subnav">
					      <li><a href="#section-newpro">新建项目</a></li>
					      <li><a href="#section-configxml">配置web.xml</a></li>
					      <li><a href="#section-configroute">配置路由</a></li>
					      <li><a href="#section-controller">控制器运行机制</a></li>
					      <li><a href="#section-codeview">视图编写</a></li>
					      <li><a href="#section-staticfile">静态文件处理</a></li>
					    </ol>
					  </li>
					  
					  <li><a href="#section-mvc">MVC架构</a>
					  	<li><a href="#section-controllerdesign">controller设计</a>
						  	<ol class="nav subnav">
						      <li><a href="#section-route">路由设置</a></li>
						      <li><a href="#section-interceptor">拦截器设置</a></li>
						      <li><a href="#section-requestdata">请求数据处理</a></li>
						      <li><a href="#section-session">session控制</a></li>
						      <li><a href="#section-outdata">多种数据输出</a></li>
						      <li><a href="#section-log">日志处理</a></li>
						    </ol>
						  </li>
						  <li class="subnav"><a href="#section-modeldesign">model设计</a>
						  	<ol class="nav subnav">
						      <li><a href="#section-modeloverview">概述</a></li>
						      <li><a href="#section-configsql2o">配置blade-sql2o</a></li>
						      <li><a href="#section-crud">CRUD使用</a></li>
						      <li><a href="#section-advanced">高级查询</a></li>
						      <li><a href="#section-transaction">事务处理</a></li>
						    </ol>
						  </li>
						  <li class="subnav"><a href="#section-viewdesign">view设计</a></li>
					  </li>
					  
					</ol>
				  </div>
				</div>
				
				<div class="col-md-8">
					<h1 id="section">开发者指南</h1>
					<p>Blade开发指南告诉你一些能够帮助你创建、测试和部署 Dart 代码的文档、文章和其他开发资源。</p>
					<h2 id="section-1">开始</h2>
					<p>阅读下面内容，或者开始<a href="/#get-started">下载 Dart</a>并玩玩 Dart 编辑器。</p>
				  	<p><a href="/codelabs/darrrt/">海盗们 停下来：编写个 Web 应用吧</a>
					：一步一步创建一个 web 应用 。
					这个一小时代码实验室假设你具有其他编程语言背景，
					但是并不要求对 Blade 或者 HTML 有所了解。
					</p>
				  	<p>
				  		<a href="/docs/dart-up-and-running/contents/ch02.html">框架概览 (<em>Dart: Up and Running</em>, Chapter 2)</a>
				： 介绍 Blade框架 语言中的每个主要功能特性，
				从变量到操作符、从类到库。</p>
				
				  <p><a href="/docs/tutorials/">Blade 教程</a>
				：使用 Blade 创建 web 应用的手把手教程。</p>
				  <h2 id="section-install">安装blade</h2>
				  <p>
				  	<h3 id="section-withmaven">添加依赖</h3>
				  	<p>添加依赖到项目中非常简单，只要确保你的版本是最新的。 
				  		mvnrepository是<a target="_blank" href="https://github.com/biezhi/blade/blob/master/LAST_VERSION.md">最新稳定版本</a>
				  		下面是一个样本：
		  		<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.bladejava&lt;/groupId&gt;
    &lt;artifactId&gt;blade-core&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
					这里添加了blade的核心库，根据你的需求可以添加其他依赖。 比如模版引擎的依赖、数据库操作的依赖等。
				  	</p>
				  	<h3 id="section-nomaven">不使用maven</h3>
				  	<p>
				  		有些同学可能还不会使用maven构建项目，建议有时间的话学习一下。
						不使用maven构建基于blade的项目也非常简单，只要把你需要的jar包加进去就可以了。
						blade核心库文件有2个：
						<ul>
							<li><a href="#">blade-kit.jar</a></li>
							<li><a href="#">blade-core.jar</a></li>
						</ul>
						升级只需更换响应的jar包即可。
				  	</p>
					
					<h2 id="section-quickstart">快速入门</h2>
					<p>
						<code class="java">blade</code>是一个能够进行快速开发应用的框架，快速入门将带领你快速的建立一个<code class="java">blade</code>的项目，然后运行起来。
						接着修改代码，让我们了解整个MVC的运行机制。那么让我们开始创建项目吧！
						这里给大家理一下流程和后续你要做的：
						<ol>
							<li>以maven or 普通方式引入blade的jar包</li>
							<li>配置web.xml并建立包和App.java文件</li>
							<li>编写App.java需要的基础环境</li>
							<li>编写路由和逻辑代码</li>
						</ol>
					</p>
					<h3 id="section-newpro">新建项目</h3>
					<p>
						这里我使用的是eclipse开发工具，如果你使用其他的IDE思路也是大致
						<h4>maven方式 创建一个maven工程 </h4>
						<p>
							<img src="http://i3.tietuku.com/dd94075137057b69.png" /><br /><br />
							<img src="http://i3.tietuku.com/d213c360dc1908e2.png" /><br /><br />
							接下来输入你的groupId、ArtifactId的信息<br /><br />
							<img src="http://i3.tietuku.com/a0fa3133f9299afc.png" /><br /><br />
							这样maven工程就创建OK了，然后我们加入blade的依赖。
							在<code>pom.xml</code>的<code>dependencies</code>中加入
					<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.bladejava&lt;/groupId&gt;
    &lt;artifactId&gt;blade-core&lt;/artifactId&gt;
    &lt;version&gt;最新版本&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
						</p>
						<h4>普通方式创建工程</h4>
						<p>
							创建一个<code>Dynamic Web Project</code>然后加入<code>blade-kit.jar</code>和<code>blade-core.jar</code>即可。
						</p>
					</p>
					<h3 id="section-configxml">配置web.xml</h3>
					<p>
						创建好项目之后配置<code>web.xml</code>，非常简单，加入下面的配置即可
						<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;BladeFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;blade.BladeFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;applicationClass&lt;/param-name&gt;
        &lt;param-value&gt;blade.hello.App&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;BladeFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
						这里的<code class="java">blade.hello.App</code>是你的应用启动类
					</p>
					<h3 id="section-configroute">配置路由</h3>
					<p>
						<pre><code class="java">public class App extends BladeApplication{
    @Override
    public void init() {
        Blade.regRoute("/", IndexController.class, "index");
        Blade.regRoute("/hi", IndexController.class, "hi");
    }
}</code></pre>
						嗯，就这么简单，在应用启动类里配置2个路由，执行方法在<code>IndexRoute</code>类中的<code>index</code>方法和<code>hi</code>方法。
					</p>
					<h3 id="section-controller">控制器运行机制</h3>
					<p>
						<pre><code class="java">// 路由
public class IndexController {

    // 返回首页界面
    public String index(){
        return "index";
    }	
    // hi请求
    public void hi(Request request){
        System.out.println("进入hello!");
	System.out.println(request.query("name"));
    }
}</code></pre>
						这个就是控制器类，里面定义了2个请求方法，<code>index</code>方法返回视图为<code>index.jsp</code>的页面。
						<code>hi</code>方法接收到请求，可以在url上传递参数name。
						`blade`默认的视图路径是<code>/WEB-INF/</code>，那么<code>index</code>方法中返回视图默认会去<code>WEB-INF</code>下找<code>index.jsp</code>。
						当然这一切都是好商量的，详细请看[路由配置](#)
					</p>
					<h3 id="section-codeview">视图编写</h3>
					<p>
						<code>blade</code>默认支持JSP方式渲染视图，也支持很多模板引擎，所以写视图就和以前怎么写JSP是一样的。
					</p>
					<h3 id="section-staticfile">静态文件处理</h3>
					<P>
						当我们的应用中存在图片、JS、CSS等文件不需要被框架处理的时候，应该做一个配置。
						<p><code>Blade.staticFolder("/static/", "/upload/");</code></p>
						这里是<code>/</code>是<code>webapp</code>的根目录。
						
						<b>这里有一个最基本的入门项目 <a href="https://github.com/bladejava/hello" target="_blank">hello</a> ，你可以学习它！</b>
					</P>
					
					
					<h2 id="section-mvc">MVC架构</h2>
					<p>
						<code>blade</code>是一个典型的MVC框架，它的执行逻辑如下：<br /><br />
						<img src="http://i3.tietuku.com/91bd5d917812f23d.png"><br /><br />
						通过文字来描述如下：
						<ol>
							<li>用户在浏览器发送一个请求，首先由<code>BladeFilter</code>接收然后交给<code>RequestHandler</code>处理。</li>
							<li>如果是静态文件(这里我们有配置什么是静态文件范围)交给web容器处理，否则继续向下走</li>
							<li>执行<code>before</code>拦截，如果你配置了<code>before</code>拦截器那么它会先执行</li>
							<li>查找路由对应的方法，找到后初始化<code>BladeContext</code>对象并执行路由方法</li>
							<li>执行<code>after</code>拦截器</li>
							<li>返回视图或者其他操作</li>
						</ol>
							
						<strong>参数配置</strong>
						<code>blade</code>目前支持Java代码、properties、JSON方式进行配置，很简单的应用直接编码即可，
						一般部署在外网上用配置文件方便一些，用户可以通过简单的配置就可以获得很大的灵活性。
						
						<strong>系统默认参数</strong>
						为了提高开发速度，<code>blade</code>框架内置了一些默认的配置
						<ul>
							<li>视图文件位置=/WEB-INF/</li>
							<li>默认渲染引擎=JSP</li>
							<li>默认视图文件后缀=.jsp</li>
							<li>默认文件编码=UTF-8</li>
							<li>默认开启DEBUG模式</li>
							<li>默认不开启数据库缓存</li>
						</ul>
						获取配置参数的方法<code>Blade.config().get(key)</code>
					</p>
					<h3 id="section-controllerdesign">controller设计</h3>
						<h4 id="section-route">路由设置</h4>
						什么是路由设置呢？
						前面介绍的MVC结构执行时，<code>blade</code>存在三种方式的路由:注解路由、函数式路由、接口回调路由，接下来详细的讲解如何使用这三种路由。
						<dl>
							<dt>注解路由</dt>
							<dd>
								这种写法可能是大家最习惯的，也是常见的写法之一，用注解配置一个路由
								<pre><code class="java">@Path("/")
public class Hello {
	
	@Route("hello")
	public String hello() {
		System.out.println("hello");
		return "hello.jsp";
	}
		
	@Route(value = "post", method = HttpMethod.POST)
	public void post(Request request) {
		String name = request.query("name");
		System.out.println("name = " + name);
	}
	
	@Route("users/:name")
	public ModelAndView users(Request request, Response response) {
		System.out.println("users");
		String name = request.pathParam(":name");
		
		ModelAndView modelAndView = new ModelAndView("users");
		modelAndView.add("name", name);
		return modelAndView;
	}

	@Route("index")
	public String index(Request request) {
		request.attribute("name", "jack");
		return "index.jsp";
	}
}</code></pre>
							<strong>@Path是什么？</strong>
							<ul>
								<li>每一个路由的类必须用<code>@Path</code>标识，这样路由解析器知道这是一个路由类</li>
								<li><code>@Path</code>注解只有一个value参数配置，相当于<code>namespace</code></li>
							</ul>
							<strong>@Route是什么？</strong>
							<ul>
								<li><code>Route</code>是一个路由的最小单元，用于方法上</li>
								<li><code>Route</code>的参数有<code>value</code>，<code>method</code>，<code>acceptType</code></li>
								<li><code>value</code>用于配置路由的URL，也就是http请求的路径</li>
								<li>一般不以<code>/</code>开头，因为<code>@Path</code>上会指定的，写法如下：
								<ul>
									<li>/hello</li>
									<li>/user/hello</li>
									<li>/user/:uid</li>
									<li>/user/:uid/post</li>
								</ul></li>
								<li>Rest风格的路由配置，一定适合你的口味！</li>
							</ul>
							</dd>
						</dl>
						
						<dl>
							<dt>函数式路由</dt>
							<dd>
								函数式路由用起来真的很酷
								<pre><code class="java">Blade.regRoute("/", IndexRoute.class, "index");
Blade.regRoute("/hi", IndexRoute.class, "hi");
Blade.regRoute("/signin", IndexRoute.class, "post:signin");
Blade.regRoute("/delete", IndexRoute.class, "delete", HttpMethod.DELETE);</code></pre>
								
								配置路由的方式很简单，下面看看对应的`IndexRoute`类
								<pre><code class="java">// 路由
public class IndexRoute {

	// 返回首页界面
	public String index(){
		return "index";
	}
	
	// hi请求
	public void hi(Request request, Response response){
		System.out.println("进入hello!");
		System.out.println(request.query("name"));
	}

        // signin请求
	public void signin(Request request, Response response){
		System.out.println("进入signin!");
	}

        // delete请求
	public void delete(Request request, Response response){
		System.out.println("进入delete!");
	}
}</code></pre>
							</dd>
						</dl>
						
						<dl>
							<dt>回调式路由</dt>
							<dd>
								从blade1.6版本开始支持了基本的RESTful函数式路由。最简单的blade路由由URI和闭包函数组成，如果你使用Java8那就再爽不过了。
								<strong>基本GET路由</strong>
								<pre><code class="java">Blade.get("/", new Handler(){
  public String run(Request req, Response res){
    //do some
  }
});</code></pre>
								<strong>基本POST路由</strong>
								<pre><code class="java">Blade.post("/signin", new Handler(){
  public String run(Request req, Response res){
    //do some
  }
});</code></pre>
								<strong>注册一个可以响应任何HTTP的路由</strong>
								<pre><code class="java">Blade.all("/hello", new Handler(){
  public String run(Request req, Response res){
    //do some
  }
});</code></pre>
								
								<strong>所有的支持的基础函数如下所示</strong>
								<pre><code class="java">Blade.get(path, CallBack);
Blade.post(path, CallBack);
Blade.delete(path, CallBack);
Blade.put(path, CallBack);
Blade.patch(path, CallBack);
Blade.head(path, CallBack);
Blade.trace(path, CallBack);
Blade.options(path, CallBack);
Blade.connect(path, CallBack);
Blade.all(path, CallBack);</code></pre>

								
							</dd>
							
						</dl>
						
						<h4 id="section-interceptor">拦截器设置</h4>
						<h4 id="section-requestdata">请求数据处理</h4>
						<h4 id="section-session">session控制</h4>
						<h4 id="section-outdata">多种数据输出</h4>
						<h4 id="section-log">日志处理</h4>
					<h3 id="section-modeldesign">model设计</h3>
						<h4 id="section-modeloverview">概述</h4>
						<h4 id="section-configsql2o">配置blade-sql2o</h4>
						<h4 id="section-crud">CRUD使用</h4>
						<h4 id="section-advanced">高级查询</h4>
						<h4 id="section-transaction">事务处理</h4>
					<h3 id="section-viewdesign">view设计</h3>
					
				</div>
		
		      </div>
		    </div>
		  </div>
	</div>

	  <footer class="footer container-full">
	    <div class="container">
	      <div class="row">
	        <div class="col-md-5">
	          <h3>一种用于快速高效开发web 应用程序的框架</h3>
	          <p>Blade 是一个 <a href="https://github.com/biezhi/blade">开源项目</a>，由  <a href="http://my.oschina.net/biezhi" target="_blank">biezhi</a> 编写。</p>
	          <p class="sm">除非注明，该页面内容使用 the Creative Commons Attribution 3.0 License 发布，示例代码使用  BSD License 发布。</p>
	        </div>
	        <div class="col-md-2 col-md-offset-1">
	          <h4>受欢迎的文章</h4>
	          <ul>
	          	<li><a href="#">blade音乐系统搭建</a></li>
	          	<li><a href="#">java-china发起者</a></li>
	            <li><a href="#">性能</a></li>
	          </ul>
	        </div>
	        <div class="col-md-2">
	          <h4>资源</h4>
	          <ul>
	            <li><a href="http://pub.dartlang.org/">Eclipse下载</a></li>
	            <li><a href="https://github.com/biezhi/blade/issues">Blade bugs and feature requests</a></li>
	          </ul>
	        </div>
	        <div class="col-md-2">
	          <h4>社区</h4>
	          <ul>
	            <li><a href="#">邮件列表</a></li>
	            <li><a href="#">中文社区</a></li>
	            <li><a href="http://weibo.com/u/5238733773">中文微博</a></li>
	            <li><a href="http://stackoverflow.com/questions/tagged/blade">Stack Overflow</a></li>
	          </ul>
	        </div>
	      </div>
	    </div>
	  </footer> <!-- End footer -->
	    
    <!-- jQuery -->
    <script src="../js/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>
	<script src="../js/ripples.min.js"></script>
    <script src="../js/material.min.js"></script>
    <script src="../plugin/highlight/highlight.pack.js"></script>
    <script>
        $(document).ready(function() {
            // This command is used to initialize some elements and make them work properly
            $.material.init();
            hljs.initHighlightingOnLoad();
        });
    </script>
</body>

</html>
